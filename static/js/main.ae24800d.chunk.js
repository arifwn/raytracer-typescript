(this["webpackJsonpraytracer-typescript"]=this["webpackJsonpraytracer-typescript"]||[]).push([[0],{25:function(t,e,a){t.exports=a(37)},30:function(t,e,a){},35:function(t,e,a){},37:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(7),c=a.n(r),o=(a(30),a(52)),s=a(4),h=a(54),l=a(14),u=a(15),f=function(){function t(e){Object(l.a)(this,t),this.canvas=void 0,this.context=void 0,this.canvas=e,this.context=null===e||void 0===e?void 0:e.getContext("2d")}return Object(u.a)(t,[{key:"dimension",value:function(){return{width:this.canvas.width,height:this.canvas.height}}},{key:"fill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(this.context){var r=this.context.fillStyle;i&&(this.context.fillStyle=i),this.context.fillRect(t,e,null==a?this.canvas.width:a,null==n?this.canvas.height:n),this.context.fillStyle=r}}},{key:"at",value:function(t,e,a){this.fill(t,e,1,1,a)}}]),t}(),d={white:"#ffffff",black:"#000000",sky:"#2196f3",highlight:"#b71c1c"},v=function(){function t(e){Object(l.a)(this,t),this.drawer=void 0,this.colors=d,this.camera={x:0,y:0,z:200,rx:0,ry:0,rz:0,fov:Math.PI/2},this.tileWidth=30,this.floorWidth=1e3,this.maxRenderDistance=1e4,e&&(this.drawer=e)}return Object(u.a)(t,[{key:"execute",value:function(){var t=this.drawer;if(t)for(var e=t.dimension(),a=this.camera.fov,n={x:this.camera.x,y:this.camera.y,z:this.camera.z},i=0;i<e.height;i++)for(var r=0;r<e.width;r++){var c=-a/2+r*(a/e.width),o=a/2-i*(a/e.height);t.at(r,i,this.rayPixel(n,{rx:this.camera.rx+o,ry:this.camera.ry+0,rz:this.camera.rz+c}))}}},{key:"lightenColor",value:function(t,e){var a=!1;"#"==t[0]&&(t=t.slice(1),a=!0);var n=parseInt(t,16),i=(n>>16)+e;i>255?i=255:i<0&&(i=0);var r=(n>>8&255)+e;r>255?r=255:r<0&&(r=0);var c=(255&n)+e;return c>255?c=255:c<0&&(c=0),(a?"#":"")+(c|r<<8|i<<16).toString(16)}},{key:"rayPixel",value:function(t,e){var a=this.shoot(t,e),n=Object(s.a)(a,2),i=n[0],r=n[1];if(Math.abs(i.x)==1/0)return this.colors.sky;if(Math.abs(i.y)==1/0)return this.colors.sky;if(Math.abs(i.z)==1/0)return this.colors.sky;if(0==i.z){var c=!1;if(Math.abs(Math.round(i.x%(2*this.tileWidth)))<this.tileWidth&&Math.abs(Math.round(i.y%(2*this.tileWidth)))<this.tileWidth&&(c=!0),Math.abs(Math.round(i.x%(2*this.tileWidth)))>=this.tileWidth&&Math.abs(Math.round(i.y%(2*this.tileWidth)))>=this.tileWidth&&(c=!0),i.x<0&&(c=!c),c){var o=(r>this.maxRenderDistance?this.maxRenderDistance:r)/this.maxRenderDistance*200;return this.lightenColor(this.colors.black,o)}return this.colors.white}return this.colors.white}},{key:"shoot",value:function(t,e){if(e.rx>0&&e.rx<Math.PI)return[{x:0,y:1/0,z:1/0},1/0];var a=t.z/Math.cos(Math.PI/2-e.rx),n=t.z/Math.tan(-e.rx),i=t.y+Math.cos(e.rz)*n,r=t.x+Math.sin(e.rz)*n;return[{x:isNaN(r)?1/0:r,y:isNaN(i)?1/0:i,z:0},isNaN(a)?1/0:Math.abs(a)]}}]),t}();var m=function(t){if(!t)return null;var e=new f(t);return new v(e)},y=Object(o.a)((function(t){return{root:{position:"relative"},renderedImageContainer:{marginLeft:"auto",marginRight:"auto"}}}));var b=function(t){t.siteSetting,t.design,t.topBannerShown;var e=y(),a=Object(n.useRef)(null),r=Object(n.useState)(500),c=Object(s.a)(r,2),o=c[0],l=(c[1],Object(n.useState)(500)),u=Object(s.a)(l,2),f=u[0],d=(u[1],Object(n.useState)(0)),v=Object(s.a)(d,2),b=v[0],x=v[1],g=Object(n.useState)(0),k=Object(s.a)(g,2),w=k[0],j=k[1],O=Object(n.useState)(100),E=Object(s.a)(O,2),M=E[0],z=E[1],C=Object(n.useState)(0),p=Object(s.a)(C,2),S=p[0],R=p[1],W=Object(n.useState)(0),N=Object(s.a)(W,2),I=N[0],P=N[1];return Object(n.useEffect)((function(){var t=m(a.current);t&&(t.camera={x:b,y:w,z:M,rx:S,ry:0,rz:I,fov:Math.PI/4},t.execute())})),i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.renderedImageContainer,style:{width:o,zoom:500/o}},i.a.createElement("canvas",{width:o,height:f,ref:a})),i.a.createElement("div",{className:e.renderedImageContainer,style:{width:500}},i.a.createElement("div",null,i.a.createElement(h.a,{onClick:function(){return x(b-10)}},"Left"),i.a.createElement(h.a,{onClick:function(){return j(w+10)}},"Front"),i.a.createElement(h.a,{onClick:function(){return j(w-10)}},"Back"),i.a.createElement(h.a,{onClick:function(){return x(b+10)}},"Right")),i.a.createElement("div",null,i.a.createElement(h.a,{onClick:function(){return P(I-.1)}},"Rt Left"),i.a.createElement(h.a,{onClick:function(){return P(I+.1)}},"Rt Right"),i.a.createElement(h.a,{onClick:function(){return R(S+.1)}},"Rt Up"),i.a.createElement(h.a,{onClick:function(){return R(S-.1)}},"Rt Down"),i.a.createElement(h.a,{onClick:function(){return z(M+10)}},"Top"),i.a.createElement(h.a,{onClick:function(){return z(M-10)}},"Bottom"))))},x=(a(35),a(36),Object(o.a)((function(t){return{root:{flexGrow:1,backgroundColor:"#ffffff"}}})));var g=function(){var t=x();return i.a.createElement("div",{className:t.root},i.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.ae24800d.chunk.js.map